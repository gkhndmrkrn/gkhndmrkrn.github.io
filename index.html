<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Gkhn</title>
<style>
#metin{
font-size: 50px;
}
button{
height: 250px;
width: 250px;
font-size: 40px;
}
</style>
</head>
<body>
<div id="metin">
metin alanı
</div>        
<button id="btn">Dinle Beni</button>
 <script>
const btn = document.getElementById("btn")
const metin = document.getElementById("metin")
const SpeechRecognitaion = window.SpeechRecognition || window.webkitSpeechRecognition
const recognition = new SpeechRecognitaion()
//recognition.continuous = false;
//recognition.lang = 'de-DE'
//recognition.interimResults = false

let ses
let sira = 0
let veri = ["kemal","mahmut","ali"]
let durum = true


btn.addEventListener('click', () => {
    btn.innerText = "Dinle Beni"
    if(durum){
        recognition.start()
        durum = false
    }    
    if(sira == 2){
        console.log("sıfırlamak için kod yaz")
    }
})



recognition.addEventListener('result', (event) => {
    //ses = undefined 
    ses = event.results[0][0].transcript.toLowerCase()    
 })

recognition.addEventListener("start", ()=>{
    ses = undefined
    metin.innerHTML = veri[sira]
    let sonlan = setTimeout(() => {
        recognition.stop()
    }, 2500);
})

recognition.addEventListener("end", ()=>{
    console.log(sira)
    if(ses !== undefined && ses == veri[sira]){
        metin.innerHTML = ses + " -Doğru"
        setTimeout(() => {
            if(sira < 2){
                sira++
                recognition.start()
            }            
        }, 1500);
    }
    if(ses !== undefined && ses !== veri[sira]){
        metin.innerHTML = veri[sira] + " - Ses verisi = " + ses
        setTimeout(() => {
            recognition.start()
        }, 2500);
        
    }
    if(ses == undefined){
        metin.innerHTML = "Ses verisi alınamadı!"
        durum = true
    }
    if(sira == 2 && durum == false ){
        setTimeout(() => {
            metin.innerHTML = "Tebrikler bitirdiniz"
            durum = true
            sira = 0
            btn.innerText = "Tekrar"
        }, 1500);
    }
 })

//metin.innerHTML = event.results[0][0].confidence * 100 + "</br>"


      </script>
        
    </body>

</html>
